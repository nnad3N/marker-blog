---
import type { Blocks, BlockType } from "@/types/payload";
import Header from "@/components/blocks/Header.astro";
import CTA from "@/components/blocks/CTA.astro";
import FeaturedPosts from "@/components/blocks/FeaturedPosts.astro";
import DisplayPosts from "@/components/blocks/DisplayPosts.astro";
import SearchWrapper from "@/components/blocks/Search/SearchWrapper.astro";

interface Props {
  blocks: Blocks;
}

const { blocks } = Astro.props;

const components: Record<BlockType, any> = {
  header: Header,
  cta: CTA,
  featuredPosts: FeaturedPosts,
  displayPosts: DisplayPosts,
  search: SearchWrapper,
};
---

<>
  {
    blocks.map((block) => {
      const Block = components[block.blockType];
      if (!Block) return null;
      return <Block block={block} />;
    })
  }
</>
